<?import com.comp2042.view.components.GameOverPanel?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import java.net.URL?>
<Pane fx:controller="com.comp2042.view.GuiController"
      xmlns:fx="http://javafx.com/fxml" styleClass="tetrisjfx-root" prefWidth="540" prefHeight="720">

    <!-- Main Game Container -->
    <VBox alignment="TOP_CENTER" spacing="0" styleClass="main-container">

        <!-- Header Area -->
        <HBox styleClass="header-area" alignment="CENTER_LEFT" spacing="20">
            <!-- Game Logo -->
            <VBox spacing="2">
                <Label text="TetrisJFX" styleClass="game-title"/>
                <Label fx:id="gameModeLabel" text="ZEN MODE" styleClass="game-mode-label"/>
            </VBox>

            <!-- Stats Container -->
            <HBox styleClass="stats-container" spacing="15" alignment="CENTER_LEFT">
                <VBox alignment="CENTER" spacing="2">
                    <Label text="SCORE" styleClass="stat-label"/>
                    <Label fx:id="scoreLabel" text="0" styleClass="stat-value"/>
                </VBox>
                <VBox alignment="CENTER" spacing="2">
                    <Label text="BEST" styleClass="stat-label"/>
                    <Label fx:id="highScoreLabel" text="0" styleClass="stat-value"/>
                </VBox>
                <VBox alignment="CENTER" spacing="2">
                    <Label text="TIME" styleClass="stat-label"/>
                    <Label fx:id="timerLabel" text="00:00" styleClass="stat-value"/>
                </VBox>
            </HBox>
        </HBox>

        <!-- Main Game Area -->
        <HBox styleClass="game-area" alignment="TOP_CENTER" spacing="30">

            <!-- Left Side: Hold Panel + Blitz Level Panel -->
            <VBox spacing="10" alignment="TOP_CENTER">
                <!-- Hold Panel -->
                <VBox styleClass="side-panel" spacing="5" alignment="TOP_CENTER" prefWidth="100" prefHeight="140">
                    <Label text="HOLD" styleClass="panel-title"/>
                    <VBox styleClass="brick-display-container" alignment="CENTER">
                        <GridPane fx:id="holdBrickPanel" vgap="1" hgap="1" alignment="CENTER"/>
                    </VBox>
                </VBox>

                <VBox fx:id="blitzLevelPanel" styleClass="side-panel" spacing="5" alignment="TOP_CENTER" prefWidth="100" prefHeight="140" managed="false" visible="false">
                    <Label text="LEVEL" styleClass="panel-title"/>
                    <VBox styleClass="brick-display-container" alignment="CENTER" spacing="5">
                        <Label fx:id="blitzLevelLabel" text="1" styleClass="blitz-level-text"/>
                        <Label fx:id="blitzProgressLabel" text="0/3 LINES" styleClass="blitz-progress-text"/>
                    </VBox>
                </VBox>
            </VBox>

            <!-- Game Board Container -->
            <VBox styleClass="game-board-container" alignment="CENTER">
                <!-- Game Board -->
                <BorderPane styleClass="game-board" fx:id="gameBoard" layoutX="160" layoutY="120" prefWidth="200" prefHeight="400">
                    <center>
                        <GridPane fx:id="gamePanel" hgap="1" vgap="1" styleClass="game-grid"/>
                    </center>
                </BorderPane>
            </VBox>

            <!-- Next Panel -->
            <VBox styleClass="side-panel" spacing="5" alignment="TOP_CENTER" prefWidth="100" prefHeight="140">
                <Label text="NEXT" styleClass="panel-title"/>
                <VBox styleClass="brick-display-container" alignment="CENTER">
                    <GridPane fx:id="nextBrickPanel" vgap="1" hgap="1" alignment="CENTER"/>
                </VBox>
            </VBox>
        </HBox>

        <!-- Footer Area -->
        <VBox styleClass="footer-area" alignment="CENTER" spacing="8">
            <Label text="CONTROLS" styleClass="controls-title"/>
            <HBox styleClass="controls-container" spacing="15" alignment="CENTER">
                <VBox alignment="CENTER" spacing="2">
                    <Label text="← →" styleClass="control-key"/>
                    <Label text="MOVE" styleClass="control-description"/>
                </VBox>
                <VBox alignment="CENTER" spacing="2">
                    <Label text="↑" styleClass="control-key"/>
                    <Label text="ROTATE" styleClass="control-description"/>
                </VBox>
                <VBox alignment="CENTER" spacing="2">
                    <Label text="↓" styleClass="control-key"/>
                    <Label text="SOFT DROP" styleClass="control-description"/>
                </VBox>
                <VBox alignment="CENTER" spacing="2">
                    <Label text="SPACE" styleClass="control-key"/>
                    <Label text="HARD DROP" styleClass="control-description"/>
                </VBox>
                <VBox alignment="CENTER" spacing="2">
                    <Label text="C/SHIFT" styleClass="control-key"/>
                    <Label text="HOLD" styleClass="control-description"/>
                </VBox>
                <VBox alignment="CENTER" spacing="2">
                    <Label text="N" styleClass="control-key"/>
                    <Label text="RESTART" styleClass="control-description"/>
                </VBox>
                <VBox alignment="CENTER" spacing="2">
                    <Label text="P" styleClass="control-key"/>
                    <Label text="PAUSE" styleClass="control-description"/>
                </VBox>
                <VBox alignment="CENTER" spacing="2">
                    <Label text="ESC" styleClass="control-key"/>
                    <Label text="MAIN MENU" styleClass="control-description"/>
                </VBox>
            </HBox>
        </VBox>
    </VBox>

    <!-- Active Brick Panel -->
    <GridPane fx:id="brickPanel" vgap="1" hgap="1" styleClass="active-brick-panel" layoutX="170" layoutY="160"/>

    <!-- Game Over Panel -->
    <Group fx:id="gameOverGroup" layoutX="120" layoutY="280">
        <VBox alignment="CENTER">
            <GameOverPanel fx:id="gameOverPanel"/>
        </VBox>
    </Group>

    <!-- Pause Panel -->
    <Group fx:id="pauseGroup" layoutX="135" layoutY="280" visible="false">
        <VBox alignment="CENTER">
            <VBox styleClass="game-over-container" alignment="CENTER" spacing="15">
                <Label text="GAME PAUSED" styleClass="gameOverStyle"/>
                <VBox alignment="CENTER" spacing="8">
                    <Label text="Press 'N' to Restart  |  Press 'ESC' for Main Menu" styleClass="game-over-instruction"/>
                </VBox>
            </VBox>
        </VBox>
    </Group>

    <!-- Notifications Group (centered) -->
    <Group fx:id="groupNotification" layoutX="160" layoutY="280"/>

    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>
</Pane>